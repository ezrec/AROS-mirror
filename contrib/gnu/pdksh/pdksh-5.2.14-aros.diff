diff -urN pdksh-5.2.14/config.h.in pdksh-5.2.14-aros-wrk/config.h.in
--- pdksh-5.2.14/config.h.in	1999-04-20 22:02:21.000000000 +0200
+++ pdksh-5.2.14-aros-wrk/config.h.in	2004-06-30 01:55:31.000000000 +0200
@@ -22,7 +22,6 @@
 /* Define to empty if the keyword does not work.  */
 #undef const
 
-
 /* Define to `int' if <sys/types.h> doesn't define.  */
 #undef gid_t
 
@@ -229,12 +228,6 @@
 /* Include game-of-life? (see comments in configure.in for more details) */
 #undef SILLY
 
-/* The number of bytes in a int.  */
-#undef SIZEOF_INT
-
-/* The number of bytes in a long.  */
-#undef SIZEOF_LONG
-
 /* Define if you have the _setjmp function.  */
 #undef HAVE__SETJMP
 
@@ -250,9 +243,6 @@
 /* Define if you have the getcwd function.  */
 #undef HAVE_GETCWD
 
-/* Define if you have the getgroups function.  */
-#undef HAVE_GETGROUPS
-
 /* Define if you have the getpagesize function.  */
 #undef HAVE_GETPAGESIZE
 
diff -urN pdksh-5.2.14/configure pdksh-5.2.14-aros-wrk/configure
--- pdksh-5.2.14/configure	1999-04-20 22:01:59.000000000 +0200
+++ pdksh-5.2.14-aros-wrk/configure	2004-06-30 01:49:33.000000000 +0200
@@ -7,7 +7,7 @@
 
       
 # Guess values for system-dependent variables and create Makefiles.
-# Generated automatically using autoconf version 2.12 
+# Generated automatically using autoconf version 2.13 
 # Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
 #
 # This configure script is free software; the Free Software Foundation
@@ -118,6 +118,7 @@
 # Initialize some other variables.
 subdirs=
 MFLAGS= MAKEFLAGS=
+SHELL=${CONFIG_SHELL-/bin/sh}
 # Maximum number of lines to put in a shell here document.
 ac_max_here_lines=12
 
@@ -401,7 +402,7 @@
     verbose=yes ;;
 
   -version | --version | --versio | --versi | --vers)
-    echo "configure generated by autoconf version 2.12"
+    echo "configure generated by autoconf version 2.13"
     exit 0 ;;
 
   -with-* | --with-*)
@@ -576,6 +577,8 @@
 ac_link='echo ${CC-cc} -o conftest$ac_exe_suffix $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5;
 ${CC-cc} -o conftest$ac_exe_suffix $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5 2>&5'
 
+ac_exeext=
+ac_objext=o
 if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
   # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
   if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
@@ -787,15 +790,16 @@
 # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:791: checking for $ac_word" >&5
+echo "configure:794: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
-  for ac_dir in $PATH; do
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do
     test -z "$ac_dir" && ac_dir=.
     if test -f $ac_dir/$ac_word; then
       ac_cv_prog_CC="gcc"
@@ -815,7 +819,7 @@
 
 
 echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
-echo "configure:819: checking whether we are using GNU C" >&5
+echo "configure:823: checking whether we are using GNU C" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -836,7 +840,7 @@
   GCC=yes
   if test "${CFLAGS+set}" != set; then
     echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
-echo "configure:840: checking whether ${CC-cc} accepts -g" >&5
+echo "configure:844: checking whether ${CC-cc} accepts -g" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gcc_g'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -863,7 +867,7 @@
 fi
 
 echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:867: checking how to run the C preprocessor" >&5
+echo "configure:871: checking how to run the C preprocessor" >&5
 # On Suns, sometimes $CPP names a directory.
 if test -n "$CPP" && test -d "$CPP"; then
   CPP=
@@ -878,14 +882,14 @@
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp.
   cat > conftest.$ac_ext <<EOF
-#line 882 "configure"
+#line 886 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:888: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out`
+{ (eval echo configure:892: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
 else
@@ -895,14 +899,31 @@
   rm -rf conftest*
   CPP="${CC-cc} -E -traditional-cpp"
   cat > conftest.$ac_ext <<EOF
-#line 899 "configure"
+#line 903 "configure"
+#include "confdefs.h"
+#include <assert.h>
+Syntax Error
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:909: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  :
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  CPP="${CC-cc} -nologo -E"
+  cat > conftest.$ac_ext <<EOF
+#line 920 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:905: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out`
+{ (eval echo configure:926: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
 else
@@ -915,6 +936,8 @@
 rm -f conftest*
 fi
 rm -f conftest*
+fi
+rm -f conftest*
   ac_cv_prog_CPP="$CPP"
 fi
   CPP="$ac_cv_prog_CPP"
@@ -925,13 +948,13 @@
 
 if test $ac_cv_prog_gcc = yes; then
     echo $ac_n "checking whether ${CC-cc} needs -traditional""... $ac_c" 1>&6
-echo "configure:929: checking whether ${CC-cc} needs -traditional" >&5
+echo "configure:952: checking whether ${CC-cc} needs -traditional" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gcc_traditional'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
     ac_pattern="Autoconf.*'x'"
   cat > conftest.$ac_ext <<EOF
-#line 935 "configure"
+#line 958 "configure"
 #include "confdefs.h"
 #include <sgtty.h>
 Autoconf TIOCGETP
@@ -949,7 +972,7 @@
 
   if test $ac_cv_prog_gcc_traditional = no; then
     cat > conftest.$ac_ext <<EOF
-#line 953 "configure"
+#line 976 "configure"
 #include "confdefs.h"
 #include <termio.h>
 Autoconf TCGETA
@@ -978,7 +1001,7 @@
 test X"$LDSTATIC" != X && LDFLAGS="${LDFLAGS+$LDFLAGS }$LDSTATIC"
 
       echo $ac_n "checking if this is a problematic os""... $ac_c" 1>&6
-echo "configure:982: checking if this is a problematic os" >&5
+echo "configure:1005: checking if this is a problematic os" >&5
 if eval "test \"`echo '$''{'ksh_cv_os_type'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -989,7 +1012,7 @@
 	case $i in	#((
 	  AIX)
 	    cat > conftest.$ac_ext <<EOF
-#line 993 "configure"
+#line 1016 "configure"
 #include "confdefs.h"
 
 #ifdef _AIX
@@ -1010,7 +1033,7 @@
 	    CPPFLAGS="$CPPFLAGS -C"
 	    #XXX grep part won't work if cross-compiling...
 	    cat > conftest.$ac_ext <<EOF
-#line 1014 "configure"
+#line 1037 "configure"
 #include "confdefs.h"
 #include <unistd.h>
 EOF
@@ -1029,18 +1052,18 @@
 	  MINIX)
 	    ac_safe=`echo "minix/config.h" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for minix/config.h""... $ac_c" 1>&6
-echo "configure:1033: checking for minix/config.h" >&5
+echo "configure:1056: checking for minix/config.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1038 "configure"
+#line 1061 "configure"
 #include "confdefs.h"
 #include <minix/config.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1043: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out`
+{ (eval echo configure:1066: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
   eval "ac_cv_header_$ac_safe=yes"
@@ -1064,7 +1087,7 @@
 	    # Both native SCO cpp and gcc understand this (leave comments in)
 	    CPPFLAGS="$CPPFLAGS -C"
 	    cat > conftest.$ac_ext <<EOF
-#line 1068 "configure"
+#line 1091 "configure"
 #include "confdefs.h"
 #include <unistd.h>
 EOF
@@ -1078,7 +1101,7 @@
 	    ;;	#(
 	  OS2_EMX)
 	    cat > conftest.$ac_ext <<EOF
-#line 1082 "configure"
+#line 1105 "configure"
 #include "confdefs.h"
 
 #ifdef __EMX__
@@ -1095,7 +1118,7 @@
 	    ;;	#(
 	  TITANOS)
 	    cat > conftest.$ac_ext <<EOF
-#line 1099 "configure"
+#line 1122 "configure"
 #include "confdefs.h"
 
 #if defined(titan) || defined(_titan) || defined(__titan)
@@ -1120,7 +1143,7 @@
 	    # to use a program that won't compile on a NeXT and one that will
 	    # only compile on a NeXT...
 	    cat > conftest.$ac_ext <<EOF
-#line 1124 "configure"
+#line 1147 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -1131,14 +1154,14 @@
 	      
 ; return 0; }
 EOF
-if { (eval echo configure:1135: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1158: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   :
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   cat > conftest.$ac_ext <<EOF
-#line 1142 "configure"
+#line 1165 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -1149,7 +1172,7 @@
 		
 ; return 0; }
 EOF
-if { (eval echo configure:1153: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1176: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ksh_cv_os_type=$i
 else
@@ -1161,7 +1184,7 @@
 rm -f conftest*	    ;;	#(
 	  HPUX)
 	    cat > conftest.$ac_ext <<EOF
-#line 1165 "configure"
+#line 1188 "configure"
 #include "confdefs.h"
 
 #ifdef __hpux
@@ -1255,7 +1278,7 @@
       # on $CPP will break.
       #
       cat > conftest.$ac_ext <<EOF
-#line 1259 "configure"
+#line 1282 "configure"
 #include "confdefs.h"
 #include <signal.h>
 	#if !defined(SIGINT) || !defined(SIGQUIT)
@@ -1283,7 +1306,7 @@
       #
       # name is used in test program
       echo $ac_n "checking for bug in getwd""... $ac_c" 1>&6
-echo "configure:1287: checking for bug in getwd" >&5
+echo "configure:1310: checking for bug in getwd" >&5
 if eval "test \"`echo '$''{'ksh_cv_hpux_getwd_bug'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1293,7 +1316,7 @@
   echo "configure: warning: assuming getwd broken" 1>&2; ksh_cv_hpux_getwd_bug=yes
 else
 cat > conftest.$ac_ext <<EOF
-#line 1297 "configure"
+#line 1320 "configure"
 #include "confdefs.h"
 
 		int
@@ -1372,12 +1395,12 @@
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr that defines DIR""... $ac_c" 1>&6
-echo "configure:1376: checking for $ac_hdr that defines DIR" >&5
+echo "configure:1399: checking for $ac_hdr that defines DIR" >&5
 if eval "test \"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1381 "configure"
+#line 1404 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <$ac_hdr>
@@ -1385,7 +1408,7 @@
 DIR *dirp = 0;
 ; return 0; }
 EOF
-if { (eval echo configure:1389: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1412: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   eval "ac_cv_header_dirent_$ac_safe=yes"
 else
@@ -1410,7 +1433,7 @@
 # Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
 if test $ac_header_dirent = dirent.h; then
 echo $ac_n "checking for opendir in -ldir""... $ac_c" 1>&6
-echo "configure:1414: checking for opendir in -ldir" >&5
+echo "configure:1437: checking for opendir in -ldir" >&5
 ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1418,7 +1441,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-ldir  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1422 "configure"
+#line 1445 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -1429,7 +1452,7 @@
 opendir()
 ; return 0; }
 EOF
-if { (eval echo configure:1433: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:1456: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1448,7 +1471,7 @@
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for opendir in -lndir""... $ac_c" 1>&6
-echo "configure:1452: checking for opendir in -lndir" >&5
+echo "configure:1475: checking for opendir in -lndir" >&5
 ac_lib_var=`echo ndir'_'opendir | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1456,7 +1479,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lndir  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1460 "configure"
+#line 1483 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -1467,7 +1490,7 @@
 opendir()
 ; return 0; }
 EOF
-if { (eval echo configure:1471: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:1494: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1491,7 +1514,7 @@
 
 else
 echo $ac_n "checking for opendir in -lx""... $ac_c" 1>&6
-echo "configure:1495: checking for opendir in -lx" >&5
+echo "configure:1518: checking for opendir in -lx" >&5
 ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1499,7 +1522,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lx  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1503 "configure"
+#line 1526 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -1510,7 +1533,7 @@
 opendir()
 ; return 0; }
 EOF
-if { (eval echo configure:1514: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:1537: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1533,12 +1556,12 @@
 fi
 
 echo $ac_n "checking for sane unistd.h""... $ac_c" 1>&6
-echo "configure:1537: checking for sane unistd.h" >&5
+echo "configure:1560: checking for sane unistd.h" >&5
 if eval "test \"`echo '$''{'ksh_cv_header_unistd'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1542 "configure"
+#line 1565 "configure"
 #include "confdefs.h"
 
 #include <unistd.h>
@@ -1551,7 +1574,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:1555: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1578: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ksh_cv_header_unistd=yes
 else
@@ -1572,12 +1595,12 @@
   fi
  
 echo $ac_n "checking terminal interface""... $ac_c" 1>&6
-echo "configure:1576: checking terminal interface" >&5
+echo "configure:1599: checking terminal interface" >&5
 if eval "test \"`echo '$''{'ksh_cv_term_check'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1581 "configure"
+#line 1604 "configure"
 #include "confdefs.h"
 #include <termios.h>
 int main() {
@@ -1592,7 +1615,7 @@
       
 ; return 0; }
 EOF
-if { (eval echo configure:1596: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:1619: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ksh_cv_term_check=termios
 else
@@ -1600,7 +1623,7 @@
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   cat > conftest.$ac_ext <<EOF
-#line 1604 "configure"
+#line 1627 "configure"
 #include "confdefs.h"
 #include <sys/ioctl.h>
 int main() {
@@ -1617,7 +1640,7 @@
 	  
 ; return 0; }
 EOF
-if { (eval echo configure:1621: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:1644: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ksh_cv_term_check=bsd
 else
@@ -1626,18 +1649,18 @@
   rm -rf conftest*
   ac_safe=`echo "termio.h" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for termio.h""... $ac_c" 1>&6
-echo "configure:1630: checking for termio.h" >&5
+echo "configure:1653: checking for termio.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1635 "configure"
+#line 1658 "configure"
 #include "confdefs.h"
 #include <termio.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1640: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out`
+{ (eval echo configure:1663: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
   eval "ac_cv_header_$ac_safe=yes"
@@ -1682,18 +1705,18 @@
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:1686: checking for $ac_hdr" >&5
+echo "configure:1709: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1691 "configure"
+#line 1714 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1696: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out`
+{ (eval echo configure:1719: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
   eval "ac_cv_header_$ac_safe=yes"
@@ -1719,12 +1742,12 @@
 done
 
 echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
-echo "configure:1723: checking whether time.h and sys/time.h may both be included" >&5
+echo "configure:1746: checking whether time.h and sys/time.h may both be included" >&5
 if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1728 "configure"
+#line 1751 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/time.h>
@@ -1733,7 +1756,7 @@
 struct tm *tp;
 ; return 0; }
 EOF
-if { (eval echo configure:1737: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1760: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_header_time=yes
 else
@@ -1754,12 +1777,12 @@
 fi
 
 echo $ac_n "checking for sys/wait.h that is POSIX.1 compatible""... $ac_c" 1>&6
-echo "configure:1758: checking for sys/wait.h that is POSIX.1 compatible" >&5
+echo "configure:1781: checking for sys/wait.h that is POSIX.1 compatible" >&5
 if eval "test \"`echo '$''{'ksh_cv_header_sys_wait_h'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1763 "configure"
+#line 1786 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/wait.h>
@@ -1775,7 +1798,7 @@
 s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;
 ; return 0; }
 EOF
-if { (eval echo configure:1779: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1802: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ksh_cv_header_sys_wait_h=yes
 else
@@ -1800,18 +1823,18 @@
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:1804: checking for $ac_hdr" >&5
+echo "configure:1827: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1809 "configure"
+#line 1832 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1814: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out`
+{ (eval echo configure:1837: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
   eval "ac_cv_header_$ac_safe=yes"
@@ -1838,12 +1861,12 @@
 fi
 
 echo $ac_n "checking for off_t in sys/types.h""... $ac_c" 1>&6
-echo "configure:1842: checking for off_t in sys/types.h" >&5
+echo "configure:1865: checking for off_t in sys/types.h" >&5
 if eval "test \"`echo '$''{'ac_cv_type_off_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1847 "configure"
+#line 1870 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -1873,12 +1896,12 @@
   fi
    
 echo $ac_n "checking for mode_t in sys/types.h""... $ac_c" 1>&6
-echo "configure:1877: checking for mode_t in sys/types.h" >&5
+echo "configure:1900: checking for mode_t in sys/types.h" >&5
 if eval "test \"`echo '$''{'ac_cv_type_mode_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1882 "configure"
+#line 1905 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -1908,12 +1931,12 @@
   fi
    
 echo $ac_n "checking for pid_t in sys/types.h""... $ac_c" 1>&6
-echo "configure:1912: checking for pid_t in sys/types.h" >&5
+echo "configure:1935: checking for pid_t in sys/types.h" >&5
 if eval "test \"`echo '$''{'ac_cv_type_pid_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1917 "configure"
+#line 1940 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -1943,12 +1966,12 @@
   fi
    
 echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
-echo "configure:1947: checking for uid_t in sys/types.h" >&5
+echo "configure:1970: checking for uid_t in sys/types.h" >&5
 if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1952 "configure"
+#line 1975 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -1985,12 +2008,12 @@
 fi
 
 echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
-echo "configure:2057: checking return type of signal handlers" >&5
+echo "configure:2012: checking return type of signal handlers" >&5
 if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2062 "configure"
+#line 2017 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <signal.h>
@@ -2007,7 +2030,7 @@
 int i;
 ; return 0; }
 EOF
-if { (eval echo configure:2079: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:2034: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_type_signal=void
 else
@@ -2035,83 +2058,13 @@
 #define RETSIGVAL $ksh_cv_signal_retval
 EOF
 
-echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:2108: checking size of int" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
-else
-cat > conftest.$ac_ext <<EOF
-#line 2116 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) exit(1);
-  fprintf(f, "%d\n", sizeof(int));
-  exit(0);
-}
-EOF
-eval $ac_link
-if test -s conftest$ac_exe_suffix && (./conftest; exit) 2>/dev/null; then
-  ac_cv_sizeof_int=`cat conftestval`
-else
-  ac_cv_sizeof_int=0
-fi
-fi
-rm -fr conftest*
-fi
-echo "$ac_t""$ac_cv_sizeof_int" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_INT $ac_cv_sizeof_int
-EOF
-
-
-echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:2143: checking size of long" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
-else
-cat > conftest.$ac_ext <<EOF
-#line 2151 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) exit(1);
-  fprintf(f, "%d\n", sizeof(long));
-  exit(0);
-}
-EOF
-eval $ac_link
-if test -s conftest$ac_exe_suffix && (./conftest; exit) 2>/dev/null; then
-  ac_cv_sizeof_long=`cat conftestval`
-else
-  ac_cv_sizeof_long=0
-fi
-fi
-rm -fr conftest*
-fi
-echo "$ac_t""$ac_cv_sizeof_long" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_LONG $ac_cv_sizeof_long
-EOF
-
-
 echo $ac_n "checking for clock_t in any of <sys/types.h>, <sys/times.h> and <sys/time.h>""... $ac_c" 1>&6
-echo "configure:2178: checking for clock_t in any of <sys/types.h>, <sys/times.h> and <sys/time.h>" >&5
+echo "configure:2063: checking for clock_t in any of <sys/types.h>, <sys/times.h> and <sys/time.h>" >&5
 if eval "test \"`echo '$''{'ac_cv_type_clock_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2183 "configure"
+#line 2068 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -2146,12 +2099,12 @@
   fi
    
 echo $ac_n "checking for sigset_t in <sys/types.h> and <signal.h>""... $ac_c" 1>&6
-echo "configure:2218: checking for sigset_t in <sys/types.h> and <signal.h>" >&5
+echo "configure:2103: checking for sigset_t in <sys/types.h> and <signal.h>" >&5
 if eval "test \"`echo '$''{'ac_cv_type_sigset_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2223 "configure"
+#line 2108 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -2181,12 +2134,12 @@
   fi
    
 echo $ac_n "checking for rlim_t in <sys/types.h> and <sys/resource.h>""... $ac_c" 1>&6
-echo "configure:2253: checking for rlim_t in <sys/types.h> and <sys/resource.h>" >&5
+echo "configure:2138: checking for rlim_t in <sys/types.h> and <sys/resource.h>" >&5
 if eval "test \"`echo '$''{'ac_cv_type_rlim_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2258 "configure"
+#line 2143 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -2212,7 +2165,7 @@
 echo "$ac_t""$ac_cv_type_rlim_t" 1>&6
      if test $ac_cv_type_rlim_t = no; then
     echo $ac_n "checking what to set rlim_t to""... $ac_c" 1>&6
-echo "configure:2284: checking what to set rlim_t to" >&5
+echo "configure:2169: checking what to set rlim_t to" >&5
     if test $ac_cv_header_sys_resource_h = yes; then
       if eval "test \"`echo '$''{'ksh_cv_rlim_check'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2222,7 +2175,7 @@
 	  
 else
 cat > conftest.$ac_ext <<EOF
-#line 2294 "configure"
+#line 2179 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
@@ -2257,7 +2210,7 @@
   fi
  
 echo $ac_n "checking for working memmove""... $ac_c" 1>&6
-echo "configure:2329: checking for working memmove" >&5
+echo "configure:2214: checking for working memmove" >&5
 if eval "test \"`echo '$''{'ksh_cv_func_memmove'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2265,7 +2218,7 @@
   echo "configure: warning: assuming memmove broken" 1>&2; ksh_cv_func_memmove=no
 else
 cat > conftest.$ac_ext <<EOF
-#line 2337 "configure"
+#line 2222 "configure"
 #include "confdefs.h"
 
 #ifdef HAVE_STRING_H
@@ -2309,7 +2262,7 @@
 
   else
     echo $ac_n "checking for working bcopy""... $ac_c" 1>&6
-echo "configure:2381: checking for working bcopy" >&5
+echo "configure:2266: checking for working bcopy" >&5
 if eval "test \"`echo '$''{'ksh_cv_func_bcopy'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2317,7 +2270,7 @@
   echo "configure: warning: assuming bcopy broken" 1>&2; ksh_cv_func_bcopy=no
 else
 cat > conftest.$ac_ext <<EOF
-#line 2389 "configure"
+#line 2274 "configure"
 #include "confdefs.h"
 
 #ifdef HAVE_STRING_H
@@ -2362,12 +2315,12 @@
   fi
  
 echo $ac_n "checking for memset""... $ac_c" 1>&6
-echo "configure:2434: checking for memset" >&5
+echo "configure:2319: checking for memset" >&5
 if eval "test \"`echo '$''{'ksh_cv_func_memset'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2439 "configure"
+#line 2324 "configure"
 #include "confdefs.h"
 
 #ifdef HAVE_STRING_H
@@ -2384,7 +2337,7 @@
        char buf[16]; memset(buf, 'x', 7); printf("%7s", buf);
 ; return 0; }
 EOF
-if { (eval echo configure:2456: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:2341: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ksh_cv_func_memset=yes
 else
@@ -2409,12 +2362,12 @@
 	ulimit waitpid wait3
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:2481: checking for $ac_func" >&5
+echo "configure:2366: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2486 "configure"
+#line 2371 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -2437,7 +2390,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:2509: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:2394: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -2464,12 +2417,12 @@
 for ac_func in sigsetjmp _setjmp
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:2536: checking for $ac_func" >&5
+echo "configure:2421: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2541 "configure"
+#line 2426 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -2492,7 +2445,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:2564: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:2449: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -2519,12 +2472,12 @@
 for ac_func in valloc getpagesize
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:2591: checking for $ac_func" >&5
+echo "configure:2476: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2596 "configure"
+#line 2481 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -2547,7 +2500,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:2619: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:2504: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -2572,7 +2525,7 @@
 done
 
 echo $ac_n "checking for working mmap""... $ac_c" 1>&6
-echo "configure:2644: checking for working mmap" >&5
+echo "configure:2529: checking for working mmap" >&5
 if eval "test \"`echo '$''{'ac_cv_func_mmap'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2580,7 +2533,7 @@
   ac_cv_func_mmap=no
 else
 cat > conftest.$ac_ext <<EOF
-#line 2652 "configure"
+#line 2537 "configure"
 #include "confdefs.h"
 
 /* Thanks to Mike Haertel and Jim Avera for this test. */
@@ -2672,12 +2625,12 @@
 fi
 
 echo $ac_n "checking for lstat""... $ac_c" 1>&6
-echo "configure:2744: checking for lstat" >&5
+echo "configure:2629: checking for lstat" >&5
 if eval "test \"`echo '$''{'ksh_cv_func_lstat'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2749 "configure"
+#line 2634 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
@@ -2690,7 +2643,7 @@
 	
 ; return 0; }
 EOF
-if { (eval echo configure:2762: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:2647: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ksh_cv_func_lstat=yes
 else
@@ -2711,19 +2664,19 @@
 fi
 
 echo $ac_n "checking for sys_errlist declaration in errno.h""... $ac_c" 1>&6
-echo "configure:2783: checking for sys_errlist declaration in errno.h" >&5
+echo "configure:2668: checking for sys_errlist declaration in errno.h" >&5
 if eval "test \"`echo '$''{'ksh_cv_decl_sys_errlist'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2788 "configure"
+#line 2673 "configure"
 #include "confdefs.h"
 #include <errno.h>
 int main() {
 char *msg = *(sys_errlist + 1); if (msg && *msg) return 12; 
 ; return 0; }
 EOF
-if { (eval echo configure:2795: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:2680: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ksh_cv_decl_sys_errlist=yes
 else
@@ -2747,12 +2700,12 @@
 
   else
     echo $ac_n "checking for sys_errlist in library""... $ac_c" 1>&6
-echo "configure:2819: checking for sys_errlist in library" >&5
+echo "configure:2704: checking for sys_errlist in library" >&5
 if eval "test \"`echo '$''{'ksh_cv_var_sys_errlist'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2824 "configure"
+#line 2709 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -2765,7 +2718,7 @@
 	  
 ; return 0; }
 EOF
-if { (eval echo configure:2837: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:2722: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ksh_cv_var_sys_errlist=yes
 else
@@ -2787,12 +2740,12 @@
   fi
  
 echo $ac_n "checking for sys_siglist declaration in signal.h or unistd.h""... $ac_c" 1>&6
-echo "configure:2859: checking for sys_siglist declaration in signal.h or unistd.h" >&5
+echo "configure:2744: checking for sys_siglist declaration in signal.h or unistd.h" >&5
 if eval "test \"`echo '$''{'ac_cv_decl_sys_siglist'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2864 "configure"
+#line 2749 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <signal.h>
@@ -2804,7 +2757,7 @@
 char *msg = *(sys_siglist + 1);
 ; return 0; }
 EOF
-if { (eval echo configure:2876: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:2761: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_decl_sys_siglist=yes
 else
@@ -2831,12 +2784,12 @@
 
   else
     echo $ac_n "checking for sys_siglist in library""... $ac_c" 1>&6
-echo "configure:2903: checking for sys_siglist in library" >&5
+echo "configure:2788: checking for sys_siglist in library" >&5
 if eval "test \"`echo '$''{'ksh_cv_var_sys_siglist'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2908 "configure"
+#line 2793 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -2848,7 +2801,7 @@
 	  
 ; return 0; }
 EOF
-if { (eval echo configure:2920: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:2805: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ksh_cv_var_sys_siglist=yes
 else
@@ -2870,12 +2823,12 @@
   fi
  
 echo $ac_n "checking time() declaration in time.h""... $ac_c" 1>&6
-echo "configure:2942: checking time() declaration in time.h" >&5
+echo "configure:2827: checking time() declaration in time.h" >&5
 if eval "test \"`echo '$''{'ksh_cv_time_delcared'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2947 "configure"
+#line 2832 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <time.h>
@@ -2883,7 +2836,7 @@
 time_t (*f)() = time; if (f) return 12;
 ; return 0; }
 EOF
-if { (eval echo configure:2955: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:2840: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ksh_cv_time_delcared=yes
 else
@@ -2904,7 +2857,7 @@
   fi
  
 echo $ac_n "checking if times() is present/working""... $ac_c" 1>&6
-echo "configure:2976: checking if times() is present/working" >&5
+echo "configure:2861: checking if times() is present/working" >&5
 if eval "test \"`echo '$''{'ksh_cv_func_times_ok'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2913,7 +2866,7 @@
 	
 else
 cat > conftest.$ac_ext <<EOF
-#line 2985 "configure"
+#line 2870 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
@@ -2959,12 +2912,12 @@
     for ac_func in getrusage
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:3031: checking for $ac_func" >&5
+echo "configure:2916: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3036 "configure"
+#line 2921 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -2987,7 +2940,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:3059: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:2944: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -3014,12 +2967,12 @@
   fi
  
 echo $ac_n "checking whether stat file-mode macros are broken""... $ac_c" 1>&6
-echo "configure:3086: checking whether stat file-mode macros are broken" >&5
+echo "configure:2971: checking whether stat file-mode macros are broken" >&5
 if eval "test \"`echo '$''{'ac_cv_header_stat_broken'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3091 "configure"
+#line 2976 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -3076,12 +3029,12 @@
 fi
 
 echo $ac_n "checking for st_rdev in struct stat""... $ac_c" 1>&6
-echo "configure:3148: checking for st_rdev in struct stat" >&5
+echo "configure:3033: checking for st_rdev in struct stat" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_st_rdev'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3153 "configure"
+#line 3038 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -3089,7 +3042,7 @@
 struct stat s; s.st_rdev;
 ; return 0; }
 EOF
-if { (eval echo configure:3161: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3046: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_struct_st_rdev=yes
 else
@@ -3110,12 +3063,12 @@
 fi
 
 echo $ac_n "checking for working const""... $ac_c" 1>&6
-echo "configure:3182: checking for working const" >&5
+echo "configure:3067: checking for working const" >&5
 if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3187 "configure"
+#line 3072 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -3164,7 +3117,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:3236: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3121: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_c_const=yes
 else
@@ -3185,12 +3138,12 @@
 fi
 
 echo $ac_n "checking if compiler understands void""... $ac_c" 1>&6
-echo "configure:3257: checking if compiler understands void" >&5
+echo "configure:3142: checking if compiler understands void" >&5
 if eval "test \"`echo '$''{'ksh_cv_c_void'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3262 "configure"
+#line 3147 "configure"
 #include "confdefs.h"
 
 	void foo() { }
@@ -3201,7 +3154,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:3273: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3158: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ksh_cv_c_void=yes
 else
@@ -3224,12 +3177,12 @@
   fi
  
 echo $ac_n "checking if compiler understands volatile""... $ac_c" 1>&6
-echo "configure:3296: checking if compiler understands volatile" >&5
+echo "configure:3181: checking if compiler understands volatile" >&5
 if eval "test \"`echo '$''{'ksh_cv_c_volatile'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3301 "configure"
+#line 3186 "configure"
 #include "confdefs.h"
 int x, y, z;
 int main() {
@@ -3238,7 +3191,7 @@
       *b = 0;
 ; return 0; }
 EOF
-if { (eval echo configure:3310: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3195: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ksh_cv_c_volatile=yes
 else
@@ -3261,12 +3214,12 @@
   fi
  
 echo $ac_n "checking if compiler understands prototypes""... $ac_c" 1>&6
-echo "configure:3333: checking if compiler understands prototypes" >&5
+echo "configure:3218: checking if compiler understands prototypes" >&5
 if eval "test \"`echo '$''{'ksh_cv_c_prototypes'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3338 "configure"
+#line 3223 "configure"
 #include "confdefs.h"
 
 #include <stdarg.h>
@@ -3280,7 +3233,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:3352: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3237: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ksh_cv_c_prototypes=yes
 else
@@ -3301,12 +3254,12 @@
   fi
  
 echo $ac_n "checking if C compiler groks __attribute__(( .. ))""... $ac_c" 1>&6
-echo "configure:3373: checking if C compiler groks __attribute__(( .. ))" >&5
+echo "configure:3258: checking if C compiler groks __attribute__(( .. ))" >&5
 if eval "test \"`echo '$''{'ksh_cv_c_func_attr'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3378 "configure"
+#line 3263 "configure"
 #include "confdefs.h"
 
 #include <stdarg.h>
@@ -3323,7 +3276,7 @@
 test_nr("%d", 10); test_cnst(2); test_uk(); test_nr(); 
 ; return 0; }
 EOF
-if { (eval echo configure:3395: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3280: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ksh_cv_c_func_attr=yes
 else
@@ -3346,7 +3299,7 @@
 # Pull the hash mark out of the macro call to avoid m4 problems.
 ac_msg="whether #! works in shell scripts"
 echo $ac_n "checking $ac_msg""... $ac_c" 1>&6
-echo "configure:3418: checking $ac_msg" >&5
+echo "configure:3303: checking $ac_msg" >&5
 if eval "test \"`echo '$''{'ac_cv_sys_interpreter'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3364,6 +3317,7 @@
 fi
 
 echo "$ac_t""$ac_cv_sys_interpreter" 1>&6
+interpval="$ac_cv_sys_interpreter"
 
 if test $ac_cv_sys_interpreter = no;
   then cat >> confdefs.h <<\EOF
@@ -3397,28 +3351,30 @@
 # SunOS /usr/etc/install
 # IRIX /sbin/install
 # AIX /bin/install
+# AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
 # AFS /usr/afsws/bin/install, which mishandles nonexistent args
 # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
 # ./install, which can be erroneously created by make from ./install.sh.
 echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
-echo "configure:3473: checking for a BSD compatible install" >&5
+echo "configure:3360: checking for a BSD compatible install" >&5
 if test -z "$INSTALL"; then
 if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-    IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS="${IFS}:"
+    IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS=":"
   for ac_dir in $PATH; do
     # Account for people who put trailing slashes in PATH elements.
     case "$ac_dir/" in
     /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
     *)
       # OSF1 and SCO ODT 3.0 have their own names for install.
-      for ac_prog in ginstall installbsd scoinst install; do
+      # Don't use installbsd from OSF since it installs stuff as root
+      # by default.
+      for ac_prog in ginstall scoinst install; do
         if test -f $ac_dir/$ac_prog; then
 	  if test $ac_prog = install &&
             grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
 	    # AIX install.  It has an incompatible calling convention.
-	    # OSF/1 installbsd also uses dspmsg, but is usable.
 	    :
 	  else
 	    ac_cv_path_install="$ac_dir/$ac_prog -c"
@@ -3448,10 +3404,12 @@
 # It thinks the first close brace ends the variable substitution.
 test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
 
+test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'
+
 test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
 
 echo $ac_n "checking if dup2() works (ie, resets the close-on-exec flag)""... $ac_c" 1>&6
-echo "configure:3523: checking if dup2() works (ie, resets the close-on-exec flag)" >&5
+echo "configure:3413: checking if dup2() works (ie, resets the close-on-exec flag)" >&5
 if eval "test \"`echo '$''{'ksh_cv_dup2_clexec_ok'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3460,7 +3418,7 @@
      ksh_cv_dup2_clexec_ok=no
 else
 cat > conftest.$ac_ext <<EOF
-#line 3532 "configure"
+#line 3422 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
@@ -3510,12 +3468,12 @@
   fi
  
 echo $ac_n "checking flavour of signal routines""... $ac_c" 1>&6
-echo "configure:3582: checking flavour of signal routines" >&5
+echo "configure:3472: checking flavour of signal routines" >&5
 if eval "test \"`echo '$''{'ksh_cv_signal_check'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3587 "configure"
+#line 3477 "configure"
 #include "confdefs.h"
 #include <signal.h>
 int main() {
@@ -3528,7 +3486,7 @@
       
 ; return 0; }
 EOF
-if { (eval echo configure:3600: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:3490: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ksh_cv_signal_check=posix
 else
@@ -3536,7 +3494,7 @@
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   cat > conftest.$ac_ext <<EOF
-#line 3608 "configure"
+#line 3498 "configure"
 #include "confdefs.h"
 #include <signal.h>
 int main() {
@@ -3546,7 +3504,7 @@
 	
 ; return 0; }
 EOF
-if { (eval echo configure:3618: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:3508: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ksh_cv_signal_check=bsd42
 else
@@ -3554,7 +3512,7 @@
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   cat > conftest.$ac_ext <<EOF
-#line 3626 "configure"
+#line 3516 "configure"
 #include "confdefs.h"
 #include <signal.h>
 			RETSIGTYPE foo() { }
@@ -3566,7 +3524,7 @@
 	  
 ; return 0; }
 EOF
-if { (eval echo configure:3638: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:3528: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ksh_cv_signal_check=bsd41
 else
@@ -3604,7 +3562,7 @@
 EOF
 
       echo $ac_n "checking if signals interrupt read()""... $ac_c" 1>&6
-echo "configure:3676: checking if signals interrupt read()" >&5
+echo "configure:3566: checking if signals interrupt read()" >&5
 if eval "test \"`echo '$''{'ksh_cv_signals_interrupt'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3613,7 +3571,7 @@
 	  
 else
 cat > conftest.$ac_ext <<EOF
-#line 3685 "configure"
+#line 3575 "configure"
 #include "confdefs.h"
 
 #include <errno.h>
@@ -3736,7 +3694,7 @@
   fi
  
 echo $ac_n "checking flavour of pgrp routines""... $ac_c" 1>&6
-echo "configure:3808: checking flavour of pgrp routines" >&5
+echo "configure:3698: checking flavour of pgrp routines" >&5
 if eval "test \"`echo '$''{'ksh_cv_pgrp_check'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3744,7 +3702,7 @@
   { echo "configure: error: cannot taste pgrp routines when cross compiling" 1>&2; exit 1; }
 else
 cat > conftest.$ac_ext <<EOF
-#line 3816 "configure"
+#line 3706 "configure"
 #include "confdefs.h"
 
 /* Check for BSD process groups */
@@ -3779,7 +3737,7 @@
   { echo "configure: error: cannot taste pgrp routines when cross compiling" 1>&2; exit 1; }
 else
 cat > conftest.$ac_ext <<EOF
-#line 3851 "configure"
+#line 3741 "configure"
 #include "confdefs.h"
 
 /* Check for POSIX process groups */
@@ -3820,7 +3778,7 @@
   { echo "configure: error: cannot taste pgrp routines when cross compiling" 1>&2; exit 1; }
 else
 cat > conftest.$ac_ext <<EOF
-#line 3892 "configure"
+#line 3782 "configure"
 #include "confdefs.h"
 
 /* Check for SYSV process groups */
@@ -3889,7 +3847,7 @@
  
   if test $ksh_cv_pgrp_check = bsd || test $ksh_cv_pgrp_check = posix ; then
    echo $ac_n "checking if process group synchronization is required""... $ac_c" 1>&6
-echo "configure:3961: checking if process group synchronization is required" >&5
+echo "configure:3851: checking if process group synchronization is required" >&5
 if eval "test \"`echo '$''{'ksh_cv_need_pgrp_sync'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3898,7 +3856,7 @@
         ksh_cv_need_pgrp_sync=yes
 else
 cat > conftest.$ac_ext <<EOF
-#line 3970 "configure"
+#line 3860 "configure"
 #include "confdefs.h"
 
 	  main()
@@ -3962,7 +3920,7 @@
   fi
  
 echo $ac_n "checking if opendir() fails to open non-directories""... $ac_c" 1>&6
-echo "configure:4034: checking if opendir() fails to open non-directories" >&5
+echo "configure:3924: checking if opendir() fails to open non-directories" >&5
 if eval "test \"`echo '$''{'ksh_cv_opendir_ok'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3971,7 +3929,7 @@
       ksh_cv_opendir_ok=no
 else
 cat > conftest.$ac_ext <<EOF
-#line 4043 "configure"
+#line 3933 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -4030,7 +3988,7 @@
   fi
  
 echo $ac_n "checking if you have /dev/fd/n""... $ac_c" 1>&6
-echo "configure:4102: checking if you have /dev/fd/n" >&5
+echo "configure:3992: checking if you have /dev/fd/n" >&5
 if eval "test \"`echo '$''{'ksh_cv_dev_fd'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -4039,7 +3997,7 @@
 	ksh_cv_dev_fd=no
 else
 cat > conftest.$ac_ext <<EOF
-#line 4111 "configure"
+#line 4001 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -4111,7 +4069,7 @@
 # Ultrix sh set writes to stderr and can't be redirected directly,
 # and sets the high bit in the cache file unless we assign to the vars.
 (set) 2>&1 |
-  case `(ac_space=' '; set) 2>&1` in
+  case `(ac_space=' '; set | grep ac_space) 2>&1` in
   *ac_space=\ *)
     # `set' does not quote correctly, so add quotes (double-quote substitution
     # turns \\\\ into \\, and sed turns \\ into \).
@@ -4178,7 +4136,7 @@
     echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
     exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
   -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
-    echo "$CONFIG_STATUS generated by autoconf version 2.12"
+    echo "$CONFIG_STATUS generated by autoconf version 2.13"
     exit 0 ;;
   -help | --help | --hel | --he | --h)
     echo "\$ac_cs_usage"; exit 0 ;;
@@ -4198,9 +4156,11 @@
  s/@@/%@/; s/@@/@%/; s/@g\$/%g/' > conftest.subs <<\\CEOF
 $ac_vpsub
 $extrasub
+s%@SHELL@%$SHELL%g
 s%@CFLAGS@%$CFLAGS%g
 s%@CPPFLAGS@%$CPPFLAGS%g
 s%@CXXFLAGS@%$CXXFLAGS%g
+s%@FFLAGS@%$FFLAGS%g
 s%@DEFS@%$DEFS%g
 s%@LDFLAGS@%$LDFLAGS%g
 s%@LIBS@%$LIBS%g
@@ -4225,6 +4185,7 @@
 s%@LDSTATIC@%$LDSTATIC%g
 s%@ac_exe_suffix@%$ac_exe_suffix%g
 s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g
+s%@INSTALL_SCRIPT@%$INSTALL_SCRIPT%g
 s%@INSTALL_DATA@%$INSTALL_DATA%g
 
 CEOF
diff -urN pdksh-5.2.14/configure.in pdksh-5.2.14-aros-wrk/configure.in
--- pdksh-5.2.14/configure.in	1999-04-20 22:01:52.000000000 +0200
+++ pdksh-5.2.14-aros-wrk/configure.in	2004-06-30 01:49:23.000000000 +0200
@@ -254,8 +254,6 @@
     AC_MSG_ERROR(Internal erorr: unknown signal return type: $ac_cv_type_signal)
 esac
 AC_DEFINE_UNQUOTED(RETSIGVAL, $ksh_cv_signal_retval)
-AC_CHECK_SIZEOF(int)
-AC_CHECK_SIZEOF(long)
 dnl sh.h sets INT32 to int or long as appropriate.  Some burnt systems, such
 dnl as NeXT's, clock_t is in sys/time.h (in non-posix mode).
 KSH_CHECK_H_TYPE(clock_t, [[for clock_t in any of <sys/types.h>, <sys/times.h> and <sys/time.h>]],
diff -urN pdksh-5.2.14/env.h pdksh-5.2.14-aros-wrk/env.h
--- pdksh-5.2.14/env.h	1970-01-01 01:00:00.000000000 +0100
+++ pdksh-5.2.14-aros-wrk/env.h	2004-06-30 20:49:24.000000000 +0200
@@ -0,0 +1,22 @@
+/* struct env_var
+#{
+#    char                *ev_name;
+#    int                 ev_flags;
+#    void                *ev_value;
+#    ev_sethook_t        *ev_sethook;
+#    ev_unsethook_t      *ev_unsethook;
+#    struct env_var      *ev_next, *ev_prev;
+#};
+*/
+/* extern struct env_var   **environ; */
+/*
+#extern struct env_var   *env_getenv(const char *name);
+#extern int              env_setenv(const char *name, int flags,
+#                                   const void *value, ev_sethook_t sethook,
+#                                   ev_unsethook_t unsethook);
+#extern char             *getenv(const char *name); 
+#extern int              setenv(const char *name, const char *value,
+#                               int overwrite);
+#extern int              putenv(const char *string);  
+#extern int              unsetenv(const char *name);
+*/
diff -urN pdksh-5.2.14/ioctl.h pdksh-5.2.14-aros-wrk/ioctl.h
--- pdksh-5.2.14/ioctl.h	1970-01-01 01:00:00.000000000 +0100
+++ pdksh-5.2.14-aros-wrk/ioctl.h	2004-06-30 20:49:24.000000000 +0200
@@ -0,0 +1,89 @@
+/*	$OpenBSD: ioctl.h,v 1.3 1996/03/03 12:11:50 niklas Exp $	*/
+/*	$NetBSD: ioctl.h,v 1.20 1996/01/30 18:21:47 thorpej Exp $	*/
+
+/*-
+ * Copyright (c) 1982, 1986, 1990, 1993, 1994
+ *	The Regents of the University of California.  All rights reserved.
+ * (c) UNIX System Laboratories, Inc.
+ * All or some portions of this file are derived from material licensed
+ * to the University of California by American Telephone and Telegraph
+ * Co. or Unix System Laboratories, Inc. and are reproduced herein with
+ * the permission of UNIX System Laboratories, Inc.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ * 1. Redistributions of source code must retain the above copyright
+ *    notice, this list of conditions and the following disclaimer.
+ * 2. Redistributions in binary form must reproduce the above copyright
+ *    notice, this list of conditions and the following disclaimer in the
+ *    documentation and/or other materials provided with the distribution.
+ * 3. All advertising materials mentioning features or use of this software
+ *    must display the following acknowledgement:
+ *	This product includes software developed by the University of
+ *	California, Berkeley and its contributors.
+ * 4. Neither the name of the University nor the names of its contributors
+ *    may be used to endorse or promote products derived from this software
+ *    without specific prior written permission.
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
+ * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
+ * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
+ * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+ * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+ * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ *
+ *	@(#)ioctl.h	8.6 (Berkeley) 3/28/94
+ */
+
+#ifndef	_SYS_IOCTL_H_
+#define	_SYS_IOCTL_H_
+
+/* #include <sys/ttycom.h> */
+
+/*
+ * Pun for SunOS prior to 3.2.  SunOS 3.2 and later support TIOCGWINSZ
+ * and TIOCSWINSZ (yes, even 3.2-3.5, the fact that it wasn't documented
+ * nonwithstanding).
+ */
+struct ttysize {
+	unsigned short	ts_lines;
+	unsigned short	ts_cols;
+	unsigned short	ts_xxx;
+	unsigned short	ts_yyy;
+};
+#define	TIOCGSIZE	TIOCGWINSZ
+#define	TIOCSSIZE	TIOCSWINSZ
+/*
+#include <sys/ioccom.h>
+
+#include <sys/dkio.h>
+#include <sys/filio.h>
+#include <sys/sockio.h>
+*/
+#ifndef _KERNEL
+
+#include <sys/cdefs.h>
+
+__BEGIN_DECLS
+int	ioctl __P((int, unsigned long, ...));
+__END_DECLS
+#endif /* !_KERNEL */
+#endif /* !_SYS_IOCTL_H_ */
+
+/*
+ * Keep outside _SYS_IOCTL_H_
+ * Compatability with old terminal driver
+ *
+ * Source level -> #define USE_OLD_TTY
+ * Kernel level -> options COMPAT_43 or COMPAT_SUNOS or ...
+ */
+#if defined(USE_OLD_TTY) || defined(COMPAT_43) || defined(COMPAT_SUNOS) || \
+    defined(COMPAT_SVR4) || defined(COMPAT_FREEBSD)
+#include <sys/ioctl_compat.h>
+#endif
Files pdksh-5.2.14/io.o and pdksh-5.2.14-aros-wrk/io.o differ
diff -urN pdksh-5.2.14/jobs.c pdksh-5.2.14-aros-wrk/jobs.c
--- pdksh-5.2.14/jobs.c	1999-07-13 18:50:56.000000000 +0200
+++ pdksh-5.2.14-aros-wrk/jobs.c	2004-06-30 20:49:24.000000000 +0200
@@ -500,13 +500,15 @@
 	fill_command(p->command, sizeof(p->command), t);
 
 	/* create child process */
-	forksleep = 1;
+/* No Fork In AROS */
+i = 1;
+/*	forksleep = 1;
 	while ((i = fork()) < 0 && errno == EAGAIN && forksleep < 32) {
-		if (intrsig)	 /* allow user to ^C out... */
+		if (intrsig)
 			break;
 		sleep(forksleep);
 		forksleep <<= 1;
-	}
+	} */
 	if (i < 0) {
 		kill_job(j);
 		remove_job(j, "fork failed");
@@ -1328,7 +1330,9 @@
 #ifdef JOB_SIGS
 		pid = ksh_waitpid(-1, &status, (WNOHANG|WUNTRACED));
 #else /* JOB_SIGS */
-		pid = wait(&status);
+/* AROS */
+/*		pid = wait(&status); */
+		pid = 0;
 #endif /* JOB_SIGS */
 
 		if (pid <= 0)	/* return if would block (0) ... */
diff -urN pdksh-5.2.14/lex.c pdksh-5.2.14-aros-wrk/lex.c
--- pdksh-5.2.14/lex.c	1999-05-12 15:44:53.000000000 +0200
+++ pdksh-5.2.14-aros-wrk/lex.c	2004-06-30 20:49:24.000000000 +0200
@@ -1003,10 +1003,11 @@
 	s->start = s->str = xp;
 
 #ifdef KSH
+/* AROS 
 	if (have_tty && ksh_tmout) {
 		ksh_tmout_state = TMOUT_READING;
 		alarm(ksh_tmout);
-	}
+	} */
 #endif /* KSH */
 #ifdef EDIT
 	if (have_tty && (0
@@ -1066,11 +1067,12 @@
 	 */
 	source = s;
 #ifdef KSH
+/* AROS
 	if (have_tty && ksh_tmout)
 	{
 		ksh_tmout_state = TMOUT_EXECUTING;
 		alarm(0);
-	}
+	} */
 #endif /* KSH */
 	s->start = s->str = Xstring(s->xs, xp);
 	strip_nuls(Xstring(s->xs, xp), Xlength(s->xs, xp));
diff -urN pdksh-5.2.14/main.c pdksh-5.2.14-aros-wrk/main.c
--- pdksh-5.2.14/main.c	1999-05-11 15:59:52.000000000 +0200
+++ pdksh-5.2.14-aros-wrk/main.c	2004-06-30 20:49:24.000000000 +0200
@@ -3,13 +3,17 @@
  */
 
 #define	EXTERN				/* define EXTERNs in sh.h */
-
+/* AROS */
+#include "env.h"
+/* End AROS */
 #include "sh.h"
 #include "ksh_stat.h"
 #include "ksh_time.h"
 
-extern char **environ;
-
+/* extern char **environ; */
+/* AROS */
+char *environ;
+/* End AROS */
 /*
  * global data
  */
diff -urN pdksh-5.2.14/proto.h pdksh-5.2.14-aros-wrk/proto.h
--- pdksh-5.2.14/proto.h	1999-07-13 18:54:51.000000000 +0200
+++ pdksh-5.2.14-aros-wrk/proto.h	2004-06-30 01:57:17.000000000 +0200
@@ -186,7 +186,9 @@
 int	parse_args	ARGS((char **argv, int what, int *setargsp));
 int 	getn		ARGS((const char *as, int *ai));
 int 	bi_getn		ARGS((const char *as, int *ai));
+#ifndef HAVE_STRERROR
 char *	strerror	ARGS((int i));
+#endif
 int 	gmatch		ARGS((const char *s, const char *p, int isfile));
 int	has_globbing	ARGS((const char *xp, const char *xpe));
 const unsigned char *pat_scan ARGS((const unsigned char *p,
diff -urN pdksh-5.2.14/sh.h pdksh-5.2.14-aros-wrk/sh.h
--- pdksh-5.2.14/sh.h	1999-05-13 19:07:58.000000000 +0200
+++ pdksh-5.2.14-aros-wrk/sh.h	2004-06-30 20:49:24.000000000 +0200
@@ -12,11 +12,15 @@
 # define	ARGS(args)	()	/* K&R declaration */
 #endif
 
+/* AROS */
+#include <process.h>
+extern int spawnvp ARGS((int mode, const char *path, char *const argv[]));
 
 /* Start of common headers */
 
 #include <stdio.h>
 #include <sys/types.h>
+#include <stdint.h>
 #include <setjmp.h>
 #ifdef HAVE_STDDEF_H
 # include <stddef.h>
@@ -215,7 +219,9 @@
 					__setostype(1); \
 				} while (0)
 # else /* OS_ISC && _POSIX */
-#  define ksh_execve(p, av, ev, flags)	execve(p, av, ev)
+/* #  define ksh_execve(p, av, ev, flags)	execve(p, av, ev) */
+/* AROS */
+#define ksh_execve(p, av, ev, flags) spawnvp(P_WAIT, p, av)
 # endif /* OS_ISC && _POSIX */
 #endif /* OS2 */
 
@@ -241,19 +247,7 @@
 extern int dup2 ARGS((int, int));
 #endif /* !HAVE_DUP2 */
 
-/* Find a integer type that is at least 32 bits (or die) - SIZEOF_* defined
- * by autoconf (assumes an 8 bit byte, but I'm not concerned).
- * NOTE: INT32 may end up being more than 32 bits.
- */
-#if SIZEOF_INT >= 4
-# define INT32	int
-#else /* SIZEOF_INT */
-# if SIZEOF_LONG >= 4
-#  define INT32	long
-# else /* SIZEOF_LONG */
-   #error cannot find 32 bit type...
-# endif /* SIZEOF_LONG */
-#endif /* SIZEOF_INT */
+typedef int32_t INT32;
 
 /* end of common headers */
 
diff -urN pdksh-5.2.14/trap.c pdksh-5.2.14-aros-wrk/trap.c
--- pdksh-5.2.14/trap.c	1999-01-12 15:35:20.000000000 +0100
+++ pdksh-5.2.14-aros-wrk/trap.c	2004-06-30 20:49:24.000000000 +0200
@@ -68,6 +68,7 @@
 alarm_catcher(sig)
 	int sig;
 {
+/* AROS
 	if (ksh_tmout_state == TMOUT_READING) {
 		int left = alarm(0);
 
@@ -77,7 +78,8 @@
 		} else
 			alarm(left);
 	}
-	return RETSIGVAL;
+	return RETSIGVAL; */
+	return 0;
 }
 #endif /* KSH */
 
diff -urN pdksh-5.2.14/tty.c pdksh-5.2.14-aros-wrk/tty.c
--- pdksh-5.2.14/tty.c	1998-12-16 20:34:26.000000000 +0100
+++ pdksh-5.2.14-aros-wrk/tty.c	2004-06-30 20:49:24.000000000 +0200
@@ -10,9 +10,12 @@
 	TTY_state *ts;
 {
 	int ret;
-
+/* AROS */
+#define HAVE_TERMIOS_H 
 # ifdef HAVE_TERMIOS_H
-	ret = tcgetattr(fd, ts);
+/* AROS */
+/*	ret = tcgetattr(fd, ts); */
+	ret = 1;
 # else /* HAVE_TERIOS_H */
 #  ifdef HAVE_TERMIO_H
 	ret = ioctl(fd, TCGETA, ts);
@@ -43,7 +46,9 @@
 	int ret = 0;
 
 # ifdef HAVE_TERMIOS_H
-	ret = tcsetattr(fd, TCSADRAIN, ts);
+/* AROS */
+/*	ret = tcsetattr(fd, TCSADRAIN, ts); */
+	ret = 0;
 # else /* HAVE_TERIOS_H */
 #  ifdef HAVE_TERMIO_H
 #   ifndef TCSETAW				/* e.g. Cray-2 */
diff -urN pdksh-5.2.14/tty.h pdksh-5.2.14-aros-wrk/tty.h
--- pdksh-5.2.14/tty.h	1996-10-08 19:27:21.000000000 +0200
+++ pdksh-5.2.14-aros-wrk/tty.h	2004-06-30 20:49:24.000000000 +0200
@@ -70,8 +70,33 @@
 #   include <sgtty.h>
 #   define TIOCSETN	TIOCSETP
 #  else
-#   include <sys/ioctl.h>
+#   include "ioctl.h"
 #  endif
+/* For AROS from Minix */
+struct sgttyb {
+  char sg_ispeed;  /* input speed */
+  char sg_ospeed;  /* output speed */
+  char sg_erase;  /* erase character */
+  char sg_kill;   /* kill character */
+  int  sg_flags;  /* mode flags */
+};
+
+struct tchars {
+  char t_intrc;   /* SIGINT char */
+  char t_quitc;   /* SIGQUIT char */
+  char t_startc;  /* start output (initially CTRL-Q) */
+  char t_stopc;   /* stop output (initially CTRL-S) */
+  char t_eofc;   /* EOF (initially CTRL-D) */
+  char t_brkc;   /* input delimiter (like nl) */
+};
+
+
+#define  ECHO 0x0008 /* echo input */
+#define  CBREAK 0x0002 /* enable cbreak mode */
+#define TIOCGETP  _IOR(t, 8, struct sgttyb) /* Get/Set parameters */
+#define TCSADRAIN 1
+
+/* End AROS */
 typedef struct {
 	struct sgttyb	sgttyb;
 #  ifdef TIOCGATC
