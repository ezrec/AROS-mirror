--------------------------------
MUI TheBar MCC class - ChangeLog
--------------------------------

$Id: ChangeLog 134 2007-12-03 23:12:52Z damato $
$URL: https://thebar.svn.sourceforge.net/svnroot/thebar/trunk/ChangeLog $

2007-12-23 Matthias Rustler <mrustler@gmx.de>

  * AROS port

2007-12-04 Jens Langner <Jens.Langner@light-speed.de>

  * mcc/button/build.c: fixed a possible crash bug where a NUL pointer
    was being accessed in case a textonly toolbar was opened and
    data->image was accessed uninitalized.

2007-12-03  Vit Sindlar <sindlarv at centrum dot cz>

  * mcp/locale/czech.ct: added Czech catalog translation

2007-12-01  Pär Boberg <pbobbenb@spray.se>

  * mcp/locale/svenska.ct: Minor update.

2007-11-07  Thore Böckelmann <tboeckel@gmx.de>

  * mcc/build.c, mcc/button/class.c, mcc/button/build.c: replaced several
    system specific #ifdef's concering alpha channel handling by a simple
    #ifdef which is set according to whether a system can handle an alpha
    channel or not. This makes the dynamic compilation more easier to
    understand.

2007-11-06  Alfonso Ranieri <alforan@tin.it>

  * I discovered that WritePixelArrayAlpha() is in
    OS4 too. So I managed various parts of the code
    to make PNG pics to display their wonderfull
    shadow on OS4 too. I make it to compile and work
    on a friend (THanks Shinkuro) with OS4 on IRC.
    Please test if it works there.

2007-11-05  Thore Böckelmann <tboeckel@gmx.de>

  * mcp/penadjust.c: fixed a typo.

2007-11-03 Jens Langner <Jens.Langner@light-speed.de>

  * mcp: removed a virtual frame where no virtual frame was necessary.

2007-11-03  Pär Boberg <pbobbenb@spray.se>

  * mcp/locale/svenska.ct: Updated according to changes.

2007-11-02 Thore Böckelmann <tboeckel@gmx.de>

  * mcp/class.c: added the register group to the cycle chain.

2007-10-31 Jens Langner <Jens.Langner@light-speed.de>

  * mcc/button/Makefile: changed dependency management to use an
    automatically generated Makefile.depend file instead of having fixed
    include dependencies in the main Makefile.
  * mcc,mcp: replaced all stccpy() uses by the more secure strlcpy() uses.
  * mcc/Makefile, Makefile.depend: changed dependency management to use an
    automatically generated Makefile.depend file instead of having fixed
    include dependencies in the main Makefile.
  * mcp/class.c, utils.c: removed the recently added properitary msnprintf()
    function and replaced it by a general snprintf() as using it with %ld
    should always be fine. So please use snprintf() instead.
  * mcp/locale/TheBar_mcp.cd: fixed some recently added typos and changed
    the copyright text to be formatted in a more standard way.
  * mcp/Makefile.depend: added automatically generated dependency file which
    will be included by the main Makefile on each run. This should fix all
    dependency issues.

2007-10-05  Thore Böckelmann <tboeckel@gmx.de>

  * mcp/backgroundadjust.c, mcp/penadjust.c, mcp/popbackground.c, mcp/poppen.c:
    fixed some compiler warnings.

2007-09-02  Pär Boberg <pbobbenb@spray.se>

  * mcp/locale/svenska.ct: Just bumped the version number to match v21.4
    release.

2007-08-29  Thore Böckelmann <tboeckel@gmx.de>

  * include/mui/TheBar_mcc.h, mcc/class.c: renamed the "class" member in struct
    MUIS_TheBar_Button to "_class" to avoid problems with the reserved word
    "class" in C++. This fixes bug #1781948.

2007-08-19 Jens Langner <Jens.Langner@light-speed.de>

  * include/mccinit.c: updated to latest 1.10 version

#### v21.4 RELEASE ############################################################

2007-07-25  Thore Böckelmann <tboeckel@gmx.de>

  * mcc/Makefile: adapted pathes for normal and virtual subclasses.
  * #?/library.c: now really uses the 3 parameter version of GETINTERFACE()
    defined in mccinit.c instead of the old obsolete version in mcc_common.h.
    The user definable functions (i.e. ClassInit()) must be declared before
    the inclusion of mccinit.c.
  * include/mccinit.c: updated to latest 1.8 version which really uses the
    GETINTERFACE() macro with 3 parameters.

2007-07-25 Jens Langner <Jens.Langner@light-speed.de>

  * include/mccinit.c: updated to latest 1.7 version

2007-07-24  Thore Böckelmann <tboeckel@gmx.de>

  * include/mccinit.c: updated to latest 1.6 version which fixes an unbalanced
    if statement.

2007-07-23 Jens Langner <Jens.Langner@light-speed.de>

  * include/mccinit.c: updated to latest 1.5 version which should take care
    of stack issues.

2007-07-05 Jens Langner <Jens.Langner@light-speed.de>

  * include/mccinit.c: updated to latest 1.4 version and adapted all our
    library.c files to make use out of the new stack enforcing mechanisms.

2007-06-29  Thore Böckelmann <tboeckel@gmx.de>

  * doc/MCC_TheBar.doc: corrected example code for mutual exclusive buttons. The
    old version used the image index for mutual exclusion instead of the button
    ID.

2007-06-28  Thore Böckelmann <tboeckel@gmx.de>

  * mcc/Debug.c: changed wrong final output of debug flags.
  * demo/#?: modified all demos to be buildable for all supported plattforms.

2007-06-27  Thore Böckelmann <tboeckel@gmx.de>

  * demo/demo[248].c: applied patches kindly provided by Thomas Klein.

2007-06-22  Thore Böckelmann <tboeckel@gmx.de>

  * mcp/locale/francais.ct: updated french translation which was kindly provided
    by Alexandre Balaban.
  * mcc/scale.c, mcc/button/scale.c: replaced all floating point calculations
    by fixed point integer calculations. First this is much faster (because of
    being integer math only) and second it saves the headaches of dealing with
    the various math libraries and all their problems. This also fixes bug
    #1724177 which was triggered by non-initalized math library bases.
  * mcc/button/Debug.c: readded accidently removed GUI debug flag.

2007-06-21  Thore Böckelmann <tboeckel@gmx.de>

  * mcp/Debug.c: removed superflous debug flags.
  * mcc/Debug.c, mcc/button/Debug.c mcc/scale.c, mcc/button/scale.c: added
    SCALE debug flag for debugging the image scaling stuff.
  * mcc/TheBar-Test.c: added an UNUSED qualifiert to the qual parameter as it is
    only used in the debug statement.
  * mcc/button/Makefile: removed the TestButton target, as the button cannot be
    tested as a stand-alone-component. Anyway, there has never been a TestButton
    program so far.
  * mcc/Makefile: added -lm to the linker flags for all platforms.

2007-06-13  Thore Böckelmann <tboeckel@gmx.de>

  * #?/Debug.c: unified the _DPRINTF() functions for all platforms.

2007-06-10 Jens Langner <Jens.Langner@light-speed.de>

  * #?/Makefile: minor update/optimization on Makefiles.
  * include/mccinit.c: updated to latest 1.1 version which should fix possible
    stack issues during the LibInit() phase. Custom libraries will now be opened
    during the LibOpen() phase instead while maintaining an own mutual exclusive
    locking variable.

2007-06-09 Jens Langner <Jens.Langner@light-speed.de>

  * include/mccinit.c, mcc/library.c, mcp/library.c: replaced the old obsolete
    mccheader.c by the new mccinit.c which should come with a much more clear
    interface and documentation on how to use it for a basis of a MUI custom
    class. This should significantly reduce the possibility of race conditions
    in the mcc/library init code.

2007-05-29  Thore Böckelmann <tboeckel@gmx.de>

  * include/mccheader.c: reworked the LibOpen() and LibClose() functions to
    increment/decrement the lib_Open counter before obtaining the semaphore to
    prevent a possible race condition with LibExpunge().

2007-03-23  Thore Böckelmann <tboeckel@gmx.de>

  * #?/Debug.c: fixed wrong final output of debug classes and flags.

2007-03-11 Thore Böckelmann <tboeckel@gmx.de>

  * #?/Debug.c: disabling a debug flag was not possible due to a check for the
    '!' at a wrong index.

2007-03-10  Pär Boberg <pbobbenb@spray.se>

  * mcp/locale: Added swedish translation. (forgot the .ct file)

#### v21.3 RELEASE ############################################################

2007-03-06  Jens Langner <Jens.Langner@light-speed.de>

  * mcp/locale: added french and german catalog translation kindly provided
    by the authors of these translations.

2007-02-28  Jens Langner <Jens.Langner@light-speed.de>

  * mcp/class.c: fixed a stupid illegal memory access where the ocheck()
    function was used with a NULL pointer, which in fact caused the tr()
    function to bail out.

#### v21.2 RELEASE ############################################################

2007-02-27  Jens Langner <Jens.Langner@light-speed.de>

  * mcc/class.c: The MUIA_TheBar_SelImages/DisImages attribute wasn't
    correctly read during OM_NEW and therefore didn't work at all.

2007-02-19  Thore Böckelmann <tboeckel@gmx.de>

  * mcc/button/Debug.c, mcc/button/utils.c: added "GUI" as debugging flag and
    cleaned up source a little bit.
  * mcc/button/library.c: IDatatypes was obtained twice, but IDiskfont was
    never obtained, hence all attempts to load a font via OpenDiskFont() did
    crash. This fixes bug #1662653.

2007-01-31  Jens Langner <Jens.Langner@light-speed.de>

  * mcc/class.c: MUIA_TheBar_DisImages and MUIA_TheBar_SelImages is now also
    OM_GET-able as documented in the autodocs.
  * mcc/class.c: the BASEFLG_MORPHOS flag wasn't set which may have caused
    that the PDTM_READPIXELARRAY operation while loading an image via the
    datatypes system failed or caused to show the images distorted on
    MorphOS. This should hopefully fix bug #1641342.

2007-01-28  Jens Langner <Jens.Langner@light-speed.de>

  * mcp: renamed the GetStr() locale translation function to the much shorter
    tr() naming and also fixed bug #1640924 where we did use the wrong
    catalog file naming.

2007-01-27  Jens Langner <Jens.Langner@light-speed.de>

  * mcp/utils.c: our own static stch_l() function is not required for a MOS
    build as well.
  * mcc/button/utils.c: our own static stcd_l() function is not required for
    a MorphOS build and can therebefore conditionally removed.
  * Makefile: removed all target specific (os4,os3,mos) makefiles and replaced
    them with a single 'Makefile' for all our sub-projects. This new makefile
    includes methods to automatically identify the HOST and TARGET opererating
    system and compiles the sources for the found target OS. In addition, that
    Makefile can be used to also compile for all supported targets via
    'make OS=XXX' where XXX is the abbreviation for the operating system.

#### v21.1 RELEASE ############################################################

2007-01-20  Jens Langner <Jens.Langner@light-speed.de>

  * misc: cleaned up certain areas of the sources according to found
    incompatibilities to the revised docuementation.
  * doc/MCC_TheBar.doc: updated autodocs to latest changed to the API
    of TheBar.mcc.

2007-01-16  Jens Langner <Jens.Langner@light-speed.de>

  * mcc/button: changed the window event handler to also always catch
    IDCMP_MOUSEBUTTONS to make it possible to catch the qualifier state in
    HandleEvent(). This should fix a bug where it might have happened that
    the wrong qualifier spec was active at the time a user pressed on a
    toolbar button.

2007-01-15  Jens Langner <Jens.Langner@light-speed.de>

  * mcp/library.c: forgot to define the mcp prefs image.
  * mcc: for being able to directly use a TheBar object for setting a new
    notify on a certain attribute change, new MUIM_TheBar_Notify and
    MUIM_TheBar_KillNotify wrapper methods were added. However both, the old
    way of first receiving the button object via GetObject and the new more
    direct and nicer way are supported equally.
  * button: reworked the overloaded MUIM_Notify method to catch all notifies by
    signaling the super class to always send all registered notifies to the
    button object instead of sending it to the destination directly. This
    allowed to introduce a new private SendNotify method which will generate
    a proper destination message where a user can now use a new variable
    (MUIV_TheBar_Qualifier) in their notifies which will automatically be
    replaced by the currently active qualifiers value when the notify was
    emitted. This should finally allow to receive key qualifier information
    with every notify message received. To complete the feature new
    MUIM_KillNotify and MUIM_KillNotifyObj overloading method were added.
  * mcc,button: significantly improved the internal button list management to
    correctly take care of freeing the whole list including their membery
    during the normal OM_DISPOSE phase of a TheBar object.
  * misc: bumped VERSION to 21 because of the huge API change.
  * misc: replaced all copymem() macro uses by direct memcpy() ones.
    The c-library should be the one to trust here.

2007-01-11  Jens Langner <Jens.Langner@light-speed.de>

  * misc: fixed all "Appareance" typos to use "Appearance" instead.

2007-01-02  Jens Langner <Jens.Langner@light-speed.de>

  * misc: updated all copyright notices to 2007.

2006-12-05  Jens Langner <Jens.Langner@light-speed.de>

  * include/mui/muiundoc.h: added the general muiundoc.h and distributed it's
    use to all our code instead of having to specify some of the yet undocumented
    MUI defines throughout our own sources.
  * mcp: ported the preferences class source code also to our generalized MCC
    framework and make it compile for all our major three platforms. So now all
    source code of TheBar should be portable accross all major Amiga platforms
    and hopefully running there as well :)

2006-12-03  Jens Langner <Jens.Langner@light-speed.de>

  * button: reworked the whole sources to also fit into the new general MCC
    framework. Added makefiles for all three major platforms and make the sources
    compile for all of them. Finally TheButton.mcc seems to work as well.
  * mcc/Makefile.#?: reworked all makefiles to also compile the TheBarVirt.mcc
    class on a normal make operation.
  * mcc, mccv: removed the 'mccv' directory and its whole sources as they were
    completly identical to the one of the mcc instead of the "#ifdef VIRTUAL"
    statements. However, there were no real reason to keep two identical copies
    of the same sources. So they are now unified and the 'mccv' directory
    completly removed.

2006-12-02  Jens Langner <Jens.Langner@light-speed.de>

  * mcc: the source do compile for OS3 and MOS again. Also the test application
    seems to work fine for the moment. So lets see how the MCC behaves with all
    the demo's included. But we seem to get quite fare for now.
  * mcc/TheBar-Test.c:  fixed the test application to not crash upon exit and
    also set the PicsDir so that the images are loaded correctly if executed
    within the respository hierarchy.
  * mcc: added debugging output to all involved functions so that our further
    work gets a bit more easier when developing on TheBar.mcc

2006-12-01  Jens Langner <Jens.Langner@light-speed.de>

  * mcc: some more general cleanup of definitions and used files.
  * mcc: removed all "register" definitions as there is really no reason
    to set all kind of variables explicitly as register. The compiler should
    decide which value to directly put on a register and which not. Just
    defining every variable "register" doesn't help at all.

2006-11-30  Jens Langner <Jens.Langner@light-speed.de>

  * mcc/TheBar-Test.c: added new testing application which should allow to
    directly run tests on TheBar.mcc without having to update the library,
    reboot and run the tests. Now the testing application will directly
    link against all MCC modules and as such acts as a standalone application.
    That might come really handy at some point.

2006-11-29  Jens Langner <Jens.Langner@light-speed.de>

  * mcc, include: ported MCC sources to the generalized mccheader.c
    framework and added GNU makefiles for all three mainly supported
    targets (OS3/OS4/MOS). SAS/C compilation should now be considered
    obsolete as we want to concentrate on getting everything running
    with GCC instead. However, please note that the MCC sources just
    compile and link now. The porting is still largly untested but
    should soonish end up in a usable state hopefully.
  * misc: applied latest changes supplied by Alfonso.

2006-11-12  Jens Langner <Jens.Langner@light-speed.de>

  * converted old CVS repository to sf.net based SVN

2005-11-30  Alfonso Ranieri <alforan@tin.it>

  * released sources under LGPL at sf.net
